pick_p2
semiGodsSemiDevils$data[[1]]$section -> sections
pick_p2 <- sections == "P2"
pick_p2
semiGodsSemiDevils$data[[1]]$text[pick_p2] -> context_picked
# context_picked
pick_p2
pick_p2
sections
str(semiGodsSemiDevils)
context_picked
str_split(context_picked,"\\s{2}") -> context_picked_split
# context_picked_split
context_picked_split
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
rep(1:4, 2)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
levels(tpe_highSchools)
levels(tpe_highSchools)
factor(tpe_highSchools,levels="臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
levels(tpe_highSchools)
factor(tpe_highSchools,levels= a)
# tpe_highSchools
levels(b)
factor(tpe_highSchools,levels= a) -> b
levels(b)
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> b
levels(b) -> tpe_highSchools
tpe_highSchools
tpe_highSchools
tpe_highSchools <- factor(rep("北一女",10))
# tpe_highSchools
tpe_highSchools
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
tpe_highSchools <- factor(tpe_highSchools,rep("北一女",10))
tpe_highSchools <- factor(levels(b) ,rep("北一女",10))
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> b
levels(b) -> tpe_highSchools
tpe_highSchools
tpe_highSchools <- factor(levels(b) ,rep("北一女",10))
tpe_highSchools <- factor(levels(b) ,rep("北一女",10))
levels(tpe_highSchools) <- levels(levels(tpe_highSchools),rep("北一女",10))
levels(tpe_highSchools) <- levels(levels(tpe_highSchools),rep("北一女",10))
levels(tpe_highSchools) <- c(levels(tpe_highSchools),rep("北一女",10))
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"rep("北一女",10)" )
tpe_highSchools
levels(tpe_highSchools) <- c(levels(tpe_highSchools),rep("北一女",10))
levels(tpe_highSchools) <- c(levels(tpe_highSchools),as.factor(rep("北一女",10))
levels(tpe_highSchools) <- c(levels(tpe_highSchools),as.factor(rep("北一女",10))
levels(tpe_highSchools) <- c(levels(tpe_highSchools),as.factor(rep("北一女",10))
tpe_highSchools
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
factor2 <-
factor(c("好","好","普通","普通", "好"))
levels(factor2)
# 先擴大levels
levels(factor2) <- c(levels(factor2), "差")
levels(factor2)
factor2[[6]] <- "差"
factor2
factor2 <-
factor(c("好","好","普通","普通", "好"))
levels(factor2)
# 先擴大levels
levels(factor2) <- c(levels(factor2), as.factor(rep("北一女",10))
levels(factor2)
factor2 <-
factor(c("好","好","普通","普通", "好"))
levels(factor2)
# 先擴大levels
levels(factor2) <- c(levels(factor2), rep("北一女",10))
levels(factor2)
factor2[[6]] <- "差"
factor2
factor2 <-
factor(c("好","好","普通","普通", "好"))
levels(factor2)
# 先擴大levels
levels(factor2) <- c(levels(factor2), rep("北一女",10))
levels(factor2)
factor2[[6]] <- "差"
factor2
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
tpe_highSchools
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
tpe_highSchools[[9]] <- "北一女"
tpe_highSchools
tpe_highSchools
regex_hs1st <- "臺?台?北?市?立?第?一女?子?高?級?中學?"
# regex_hs1st
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
regex_hsTitle <- "(高(級)?中(學)?)$"
# regex_hsTitle
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> b
levels(b) -> tpe_highSchools
tpe_highSchools
regex_hs1st <- "臺?台?北?市?立?第?一女?子?高?級?中學?"
regex_hs1st
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <- "(高(級)?中(學)?)$"
# regex_hsTitle
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
tpe_highSchools[[9]] <- "北一女"
tpe_highSchools
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> b
levels(b) -> tpe_highSchools
tpe_highSchools
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
tpe_highSchools[[9:10]] <- rep("北一女",10)
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
levels(tpe_highSchools) <- c(levels(tpe_highSchools),"北一女")
regex_hs1st <- "臺?台?北?市?立?第?一女?子?高?級?中學?"
regex_hs1st
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <- "(高(級)?中(學)?)$"
# regex_hsTitle
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
tpe_highSchools
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> b
levels(b) -> tpe_highSchools
tpe_highSchools
str(tpe_highSchools)
str(tpe_highSchools)
levels(tpe_highSchools) <- c(levels(b),"北一女")
tpe_highSchools[[9:10]] <- rep("北一女",10)
levels(tpe_highSchools) <- c(levels(b),"北一女")
tpe_highSchools[[9:10]] <- rep("北一女",10)
str(tpe_highSchools)
levels(tpe_highSchools) <- c(levels(b),"北一女")
tpe_highSchools[[9]] <- "北一女"
tpe_highSchools
levels(tpe_highSchools) <- c(levels(b),"北一女")
tpe_highSchools[[9]] <- "北一女"
tpe_highSchools
regex_hs1st <- "臺?台?北?市?立?第?一女?子?高?級?中學?"
regex_hs1st
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
factor(tpe_highSchools,levels= a) -> tpe1
a <- c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
factor(tpe_highSchools,levels= a) -> tpe1
levels(tpe1) -> tpe_highSchools
tpe_highSchools
levels(tpe1) <- c(levels(tpe1),"北一女")
tpe1
tpe1[[9]] <- "北一女"
tpe1
levels(tpe1) <- c(levels(tpe1),"北一女")
tpe1[[9]] <- "北一女"
tpe1[[10]] <- "北一女"
tpe1[[11]] <- "北一女"
tpe1[[12]] <- "北一女"
tpe1[[13]] <- "北一女"
tpe1[[14]] <- "北一女"
tpe1[[15]] <- "北一女"
tpe1[[16]] <- "北一女"
tpe1[[17]] <- "北一女"
tpe1[[18]] <- "北一女"
tpe_highSchools
levels(tpe1) <- c(levels(tpe1),"北一女")
tpe1[[9]] <- "北一女"
tpe1[[10]] <- "北一女"
tpe1[[11]] <- "北一女"
tpe1[[12]] <- "北一女"
tpe1[[13]] <- "北一女"
tpe1[[14]] <- "北一女"
tpe1[[15]] <- "北一女"
tpe1[[16]] <- "北一女"
tpe1[[17]] <- "北一女"
tpe1[[18]] <- "北一女"
tpe1 -> tpe_highSchools
tpe_highSchools
regex_hs1st <- "臺?台?北?市?立?第?一女?子?高?級?中學?"
regex_hs1st
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <- "(高(級)?中(學)?)$"
regex_hsTitle
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <- "(高?(級)?中?(學)?)$"
regex_hsTitle
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
View(data228)
str(data228)
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
source("https://www.dropbox.com/s/pc8qg2phs3ypcr8/midterm108_2.R?dl=1", encoding="UTF-8")
View(params)
View(courseStructure)
regex <- [:graph:]+系[:graph:]+
regex <- [:graph:]+系
regex <- "[:graph:]+系"
str_extract_all(courseStructure$應修系級,regex)
# majorGradeCombos
regex <- "[:graph:]+系"
str_extract_all(courseStructure$應修系級,regex)
table(str_extract_all(courseStructure$應修系級,regex))
table(a)
str_extract_all(courseStructure$應修系級,regex) ->a
regex <- "[:graph:]+系"
str_extract_all(courseStructure$應修系級,regex) -> sn
table(sn)
regex <- "[:graph:]+系[:graph:]+"
str_extract_all(courseStructure$應修系級,regex) -> sn
table(sn)
str_extract_all(courseStructure$應修系級,regex) -> sn
regex <- "[:graph:]+系[:graph:]+|[:graph:]+法律學系[:graph:]+組[:graph:]+"
str_extract_all(courseStructure$應修系級,regex) -> sn
table(sn)
str_extract_all(courseStructure$應修系級,regex) -> sn
sn
levels(s2)
courseStructure$應修系級 -> s1
as.factor(s1) -> s2
levels(s2)
regex <- "[:graph:]+系[:graph:]+|[:graph:]+法律學系[:graph:]+組[:graph:]+"
courseStructure$應修系級 -> s1
as.factor(s1) -> s2
levels(s2) -> s3
str_extract_all(s3,regex) -> sn
sn
table(sn)
regex <- "[:graph:]+系([:graph:]+)?|[:graph:]+法律學系[:graph:]+組[:graph:]+"
courseStructure$應修系級 -> s1
as.factor(s1) -> s2
levels(s2) -> s3
str_extract_all(s3,regex) -> sn
sn
table(sn)
table(sn)
levels(sn)
class(sn)
class(s1)
class(s3)
str_extract_all(s3,regex) -> sn
class(s3)
class(sn)
str_extract(s3,regex) -> sn
class(sn)
levels(as.factor(sn))
table(sn)
View(data228)
levels(data228$全宗名)
as.factor(n1)
data228$全宗名 -> n1
as.factor(n1)
levelsas.factor(n1)
levels(as.factor(n1))
data228$檔號 -> num
regex1 <- ^"(?<=A)[0-9]+(?=[:graph:])"
regex1 <- ^"(?<=A)[0-9]+(?=[:graph:])"
regex1 <- ^"(?<=A)[0-9]+(?=[:graph:])"
regex1 <- "^(?<=A)[0-9]+(?=[:graph:])"
data228$檔號 -> num
str_extract(num,regex1)
# data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1)
# data228[c("全宗名編號","年")]
levels(num1)
levels(as.factor(num1))
str_extract(num,regex1) -> num1
levels(as.factor(num1))
levels(as.factor(num1)) -> "全宗名編號"
data228$檔號 -> y
str_extract(num,regex2)
regex2 <- "[0-9][0-9][0-9][0-9]"
str_extract(num,regex2)
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "(?=00)[0-9][0-9]"
str_extract(num,regex2)
# data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號
he <- "00"
regex2 <- "(?=0)[0-9][0-9]"
str_extract(num,regex2)
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "(?=0)[0-9]+"
str_extract(num,regex2)
# data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "(?=0)[0-9][0-9]"
str_extract(num,regex2)
# data228[c("全宗名編號","年")]
regex2 <- "(?<=00)[0-9][0-9]"
regex2 <- "(?<=00)[0-9][0-9]"
str_extract(num,regex2)
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "00[0-9][0-9]"
str_extract(num,regex2)
# data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2)
# data228[c("全宗名編號","年")]
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy)))
data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> "年"
data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
data228[[5]] <- "全宗名編號"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> "年"
data228[[6]] <- "年"
data228[c("全宗名編號","年")]
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號"
data228[[5]] <- "全宗名編號"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> "年"
data228[[6]] <- "年"
data228[c("全宗名編號","年")]
data228
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號1"
data228[[全宗名編號]] <- "全宗名編號1"
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號1"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> "年1"
data228[c("全宗名編號","年")] <- c("全宗名編號1", "年1")
data228
data228[c("全宗名編號","年")]
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號1"
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> "年1"
data228[c("全宗名編號","年")] <- c("全宗名編號1", "年1")
data228
data228[c("全宗名編號","年")]
"全宗名編號1"
View(data228)
levels(as.factor(num1)) -> "全宗名編號1"
"全宗名編號1"
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
num1
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> "全宗名編號1"
"全宗名編號1"
"全宗名編號1"
levels(as.factor(num1)) -> a
a
data228[c("全宗名編號","年")] <- c(tex,year)
regex1 <- "^A[0-9]+[:graph:]"
data228$檔號 -> num
str_extract(num,regex1) -> num1
levels(as.factor(num1)) -> tex
regex2 <- "(?<=[:punct:])00[0-9][0-9](?=[:punct:])"
str_extract(num,regex2) -> yy
as.integer(levels(as.factor(yy))) -> year
data228[c("全宗名編號","年")] <- c(tex,year)
year
View(data228)
str(data228$附註)
View(data228)
data228[c("全宗名編號","年")] <- c(tex,year)
data228[["全宗名編號"]] <- tex
data228[["全宗名編號"]] <- tex
data228[["全宗名編號"]] <- a
data228[["全宗名編號"]] <- tex
b <- data228$`附註` == "表冊名稱:臺灣省二二八事變正法及死亡人犯名冊"
data228$`個人名稱`[b] -> victims
victims
data228$檔號 == victims
ss <- data228$`附註` == "表冊名稱:臺灣省二二八事變正法及死亡人犯名冊"
data228$`個人名稱`[ss] -> victims
victims
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
check_regexRestriction("高級中學",regex_hsTitle)
data228[c("全宗名編號","年")] <- c(tex,year)
data228
data228[c("全宗名編號","年")] <- c(tex,year)
